#include "ball.h"
#include "peripherals.h"

extern unsigned int GRAPH[640 * 480];

#define sizeX 		(20)
#define sizeY		(20)

static int ball_r[20][20] = {
		{20,0,0,0,0,61,161,212,254,247,244,241,210,140,53,0,0,3,1,0},
		{0,5,0,11,167,237,255,248,254,255,255,255,255,250,215,174,22,3,0,7},
		{0,3,42,188,255,255,255,255,247,250,252,254,255,255,255,251,189,10,0,4},
		{0,7,184,255,255,251,250,255,255,251,251,255,255,252,250,253,251,166,11,1},
		{0,163,242,255,231,253,255,239,255,255,255,254,255,255,255,253,255,249,153,3},
		{60,220,245,255,255,255,255,255,255,255,255,252,254,255,255,255,250,255,223,52},
		{172,217,247,251,255,255,255,255,254,249,247,253,255,255,255,255,249,255,250,162},
		{196,227,253,255,252,253,255,246,255,255,255,255,255,255,255,255,255,243,249,220},
		{229,235,238,252,255,255,248,255,255,255,255,255,255,255,255,255,255,250,255,245},
		{224,228,233,251,255,255,248,255,255,255,255,255,255,255,255,255,255,248,255,248},
		{228,232,232,248,255,255,247,255,255,255,255,255,255,255,255,255,255,251,255,249},
		{224,238,235,245,251,253,249,255,255,255,255,255,255,255,255,255,251,250,255,242},
		{197,235,237,241,252,255,255,255,255,255,255,255,255,255,255,255,255,255,255,205},
		{155,227,237,232,244,255,255,255,255,255,255,255,255,255,255,255,254,255,250,149},
		{82,202,236,223,230,249,254,255,255,255,255,255,255,255,255,255,255,255,219,62},
		{3,168,235,224,224,237,244,253,255,255,255,255,255,255,255,255,255,245,180,4},
		{0,18,203,221,229,236,229,237,249,253,255,254,250,255,255,251,246,185,11,0},
		{0,7,48,193,221,233,238,227,224,230,239,245,247,249,238,222,167,22,1,0},
		{3,0,0,10,148,223,222,231,233,230,227,228,228,221,197,170,8,0,4,0},
		{8,1,0,4,8,79,168,206,229,228,232,230,205,150,75,11,0,0,1,13}
		};


static int ball_g[20][20] = {
		{0,1,5,6,3,31,85,120,133,128,129,134,124,86,34,2,5,0,0,2},
		{1,0,4,2,95,121,138,132,127,134,132,124,128,134,119,94,0,4,4,3},
		{4,8,24,107,124,123,129,118,128,130,126,119,121,128,129,125,101,0,11,0},
		{5,0,105,120,122,132,126,136,135,130,131,137,134,126,127,134,127,108,0,0},
		{3,91,98,127,132,134,127,129,118,124,127,127,126,128,130,130,131,133,94,0},
		{30,104,98,136,139,120,124,128,125,130,132,127,124,128,129,125,126,123,123,22},
		{96,99,116,127,122,124,130,123,131,130,131,132,132,127,128,130,125,135,133,87},
		{106,111,112,127,142,123,122,136,128,127,127,127,127,127,128,130,132,127,129,110},
		{104,104,116,128,121,128,127,129,128,128,128,128,128,128,128,128,126,126,129,132},
		{100,96,109,130,128,133,129,126,128,128,128,128,128,128,128,128,132,127,127,133},
		{107,96,102,127,128,131,131,128,128,128,128,128,128,128,128,128,131,128,131,136},
		{110,98,98,122,125,128,130,128,128,128,128,128,128,128,128,128,126,123,130,133},
		{104,99,93,115,122,129,130,125,128,128,128,128,128,128,128,128,131,126,127,114},
		{93,105,93,103,114,125,129,125,128,128,128,128,128,128,128,128,123,129,129,87},
		{54,100,100,98,103,114,124,129,128,128,128,128,128,128,128,128,129,134,117,34},
		{0,82,105,104,100,104,117,129,128,128,128,128,128,128,128,128,132,125,93,0},
		{6,0,121,99,93,101,100,110,119,126,132,129,124,127,133,131,117,110,0,5},
		{2,8,24,127,107,92,98,97,97,103,109,111,111,113,111,101,105,0,2,9},
		{0,5,6,0,86,117,97,107,106,100,97,96,100,106,101,87,5,2,11,2},
		{4,0,0,5,0,37,86,95,102,101,107,110,104,79,36,0,2,1,0,9}
		};


static int ball_b[20][20] = {
		{10,4,3,2,0,31,89,121,142,134,136,140,127,86,30,0,4,2,0,0},
		{4,1,0,0,107,142,150,135,134,142,141,136,140,147,131,105,0,0,0,4},
		{2,1,14,113,147,142,137,126,130,132,129,125,130,141,143,139,115,0,1,2},
		{1,0,110,134,131,134,128,137,140,135,133,139,137,129,130,138,138,106,0,0},
		{0,103,121,136,127,136,134,128,134,136,137,134,131,133,134,133,137,142,98,0},
		{30,123,117,138,141,131,137,138,139,143,140,135,132,137,137,133,126,139,133,20},
		{100,111,124,129,129,137,141,136,136,134,134,139,138,135,135,136,125,145,142,91},
		{106,114,120,128,141,133,135,137,133,133,132,135,135,135,135,136,136,130,138,119},
		{112,118,127,138,130,133,132,140,135,135,135,135,135,135,135,135,137,134,139,136},
		{108,109,119,137,135,138,133,136,135,135,135,135,135,135,135,135,141,134,138,138},
		{116,108,110,132,133,135,134,137,135,135,135,135,135,135,135,135,137,133,142,140},
		{118,111,106,125,129,134,136,136,135,135,135,135,135,135,135,135,130,130,142,138},
		{112,113,103,118,130,141,138,133,135,135,135,135,135,135,135,135,136,137,141,119},
		{98,118,103,107,124,140,139,132,135,135,135,135,135,135,135,135,129,140,144,88},
		{53,113,110,102,114,131,134,133,135,135,135,135,135,135,135,135,133,145,130,31},
		{0,91,115,106,111,121,126,129,135,135,135,135,135,135,135,135,134,134,102,0},
		{6,0,133,112,103,107,105,117,131,137,140,135,128,131,135,132,135,117,0,0},
		{2,3,20,128,117,108,111,107,108,114,119,122,123,125,120,110,108,0,0,5},
		{0,0,0,0,91,131,111,118,117,110,107,109,113,119,112,95,0,0,4,0},
		{3,0,2,7,0,39,92,104,113,110,115,120,112,83,37,0,4,2,0,8}
		};



ball::ball(void)
{
	prY = 400;
	prX = 330;
	prVisible = true;
	prColor = 0;

	this->ball_draw();

}

void ball::ball_visible(bool f)
{
	prVisible = f;
}


void ball::ball_draw(void)
{
	if(prVisible)
	{
		for (int b=prY; b<(prY+sizeY); b++)
		{
		  for (int a=prX; a<(prX+sizeX); a++)
		  {
			  prColor = ball_r[b - prY][a - prX] << 16 | ball_g[b - prY][a - prX] << 8 | ball_b[b - prY][a - prX];
			  SetPixel(GRAPH,a,b, prColor);
		  }
		}
	}
}

void ball::ball_mov(int x, int y)
{
		prY += y;
		prX += x;

		this->ball_draw();
}

int ball::ball_getPosX(void)
{
	return prX;
}

int ball::ball_getPosY(void)
{
	return prY;
}

