#include "ball.h"
#include "peripherals.h"

extern unsigned int GRAPH[640 * 480];

#define sizeX 		(20)
#define sizeY		(20)

static int ball_r[20][20] = {
		{255,255,255,255,255,251,250,251,250,249,247,246,241,245,255,255,255,255,254,255},
		{255,255,255,255,251,250,254,254,253,252,254,249,238,221,215,240,254,254,255,254},
		{255,255,254,249,254,255,253,253,255,254,254,250,242,224,209,189,220,255,255,255},
		{255,255,248,255,253,254,254,253,253,254,254,249,238,225,206,188,177,217,255,255},
		{254,250,252,254,254,253,254,255,255,253,253,246,233,223,203,186,174,170,234,255},
		{252,252,255,255,255,253,254,255,254,254,251,241,231,217,201,182,171,166,182,254},
		{250,254,253,253,252,252,253,254,254,253,247,238,226,209,192,179,168,163,163,231},
		{248,253,253,254,251,253,252,254,255,251,242,231,219,203,186,173,166,162,160,203},
		{250,254,253,254,253,255,255,253,253,247,234,226,210,194,178,166,164,161,158,185},
		{250,254,254,254,253,255,254,255,250,238,228,216,202,185,171,164,160,156,158,166},
		{251,254,255,253,255,253,254,252,241,233,222,207,191,176,165,159,155,156,156,165},
		{250,254,253,254,255,254,251,242,234,225,209,195,182,167,161,154,154,154,154,184},
		{249,255,254,254,253,249,243,235,226,213,199,184,169,161,154,152,152,153,153,204},
		{248,250,252,250,247,242,234,226,213,202,186,172,160,153,150,151,151,150,157,230},
		{253,241,246,243,241,235,223,212,200,187,172,161,152,148,146,146,146,149,175,253},
		{255,247,236,233,230,223,212,201,188,173,160,150,143,142,141,139,142,158,230,255},
		{255,255,238,225,216,209,200,186,171,157,148,139,136,139,138,141,152,209,255,255},
		{254,254,255,235,207,196,184,169,155,144,135,133,134,136,140,148,207,255,255,255},
		{255,255,254,254,241,201,173,159,147,140,136,135,140,144,166,226,255,255,255,255},
		{255,255,255,255,255,254,234,206,179,157,152,175,196,228,252,254,255,255,255,255}
		};

static int ball_g[20][20] = {
		{255,255,255,255,255,250,213,169,129,93,91,131,172,221,255,255,255,255,254,255},
		{255,255,255,255,214,126,99,98,91,85,82,77,70,64,127,225,255,255,255,254},
		{255,255,253,183,105,103,100,95,90,88,82,74,68,62,53,49,191,255,255,255},
		{255,255,184,109,111,107,102,96,94,86,80,73,66,60,52,43,41,186,255,255},
		{254,215,110,113,117,114,105,101,93,85,78,72,65,58,49,41,38,43,221,255},
		{251,132,116,121,126,119,111,102,92,83,76,69,63,56,45,38,35,36,111,253},
		{213,110,118,127,130,126,112,103,90,82,72,67,60,52,42,35,32,32,38,216},
		{169,111,118,128,132,119,111,101,88,78,70,63,57,47,39,32,30,31,34,162},
		{129,107,115,120,121,114,107,96,83,76,66,58,51,42,33,28,28,28,31,118},
		{102,104,109,111,110,107,101,88,78,69,61,54,46,36,30,25,25,25,29,65},
		{99,98,101,98,101,98,91,82,72,64,57,50,39,31,25,22,22,23,29,68},
		{126,91,96,92,93,88,82,73,66,58,52,42,33,26,22,22,21,23,29,115},
		{165,86,87,85,85,80,74,67,59,52,46,35,28,22,18,19,21,24,29,160},
		{215,85,81,79,78,73,67,60,55,45,38,28,21,17,16,17,19,23,44,212},
		{252,122,79,75,73,67,61,54,47,39,31,22,16,14,16,16,18,27,104,252},
		{255,219,83,74,68,61,54,48,40,32,24,17,15,14,13,16,20,48,212,255},
		{255,255,193,81,66,55,48,39,32,25,18,13,12,12,14,17,35,174,255,255},
		{254,255,255,198,82,58,45,33,26,18,12,10,11,13,17,38,174,255,255,255},
		{255,255,254,255,230,136,51,37,25,16,13,14,18,26,95,212,255,255,255,255},
		{255,255,255,255,255,254,223,172,124,66,57,112,156,210,251,254,255,255,255,255}
		};

static int ball_b[20][20] = {
		{255,255,255,255,255,248,205,155,102,52,53,112,165,219,253,255,255,255,254,255},
		{255,255,255,253,206,98,53,50,42,33,34,27,23,19,117,222,255,255,255,254},
		{255,255,251,171,65,62,58,48,42,40,32,25,18,15,15,22,185,255,255,255},
		{255,255,172,72,75,74,63,53,52,41,30,23,18,15,14,14,19,183,255,253},
		{254,209,74,83,85,85,72,65,54,40,31,21,16,13,11,12,12,24,215,255},
		{249,105,83,92,104,94,81,70,54,39,31,23,16,10,7,11,9,14,105,251},
		{207,75,89,104,107,103,85,72,55,38,27,21,12,9,7,8,6,12,20,213},
		{154,75,89,106,110,94,83,70,52,35,24,14,11,7,5,4,8,11,12,158},
		{102,73,87,95,98,87,81,65,47,32,21,13,9,5,4,2,6,9,14,110},
		{62,69,78,81,80,79,70,51,42,26,16,8,6,3,2,4,6,7,10,55},
		{58,57,67,67,71,67,58,46,31,21,12,9,2,0,0,3,3,4,12,52},
		{98,48,55,53,55,48,43,32,21,14,9,1,3,0,3,1,4,5,11,108},
		{154,43,43,42,46,39,31,22,14,8,4,2,1,3,4,2,3,5,17,157},
		{210,40,35,35,35,30,22,12,8,2,2,2,2,3,4,5,6,8,30,210},
		{250,102,35,28,28,22,14,7,3,3,3,3,2,2,0,3,5,16,98,250},
		{255,216,51,32,21,15,9,6,4,2,2,2,2,1,0,1,7,35,212,255},
		{255,255,187,55,31,17,7,5,3,2,2,1,2,3,4,9,25,170,255,255},
		{254,255,255,192,62,32,16,9,5,3,4,3,3,5,9,25,169,253,255,255},
		{255,255,254,255,228,130,38,22,14,8,6,6,7,16,89,209,253,255,255,255},
		{255,255,255,255,255,254,219,170,121,61,51,105,154,210,249,254,255,255,255,255},
		};


ball::ball(void)
{
	prY = 400;
	prX = 330;
	prVisible = true;
	prColor = 0;

	this->ball_draw();

}

void ball::ball_visible(bool f)
{
	prVisible = f;
}


void ball::ball_draw(void)
{
	if(prVisible)
	{
		for (int b=prY; b<(prY+sizeY); b++)
		{
		  for (int a=prX; a<(prX+sizeX); a++)
		  {
			  prColor = ball_r[b - prY][a - prX] << 16 | ball_g[b - prY][a - prX] << 8 | ball_b[b - prY][a - prX];
			  SetPixel(GRAPH,a,b, prColor);
		  }
		}
	}
}

void ball::ball_mov(int x, int y)
{
		prY += y;
		prX += x;

		this->ball_draw();
}

int ball::ball_getPosX(void)
{
	return prX;
}

int ball::ball_getPosY(void)
{
	return prY;
}

